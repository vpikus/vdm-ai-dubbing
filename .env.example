# Video Download Manager Environment Configuration
# Copy this file to .env and adjust values for your environment

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Generate with: openssl rand -base64 24
REDIS_PASSWORD=
REDIS_PORT=6379

# =============================================================================
# GATEWAY CONFIGURATION
# =============================================================================
GATEWAY_PORT=3000
NODE_ENV=production
LOG_LEVEL=info

# JWT secret for authentication (min 32 characters, REQUIRED)
# Generate with: openssl rand -base64 32
JWT_SECRET=

# Admin credentials (REQUIRED - created on first run)
# Password must be at least 8 characters
ADMIN_USERNAME=
ADMIN_PASSWORD=

# =============================================================================
# DOWNLOAD WORKER CONFIGURATION
# =============================================================================
# Maximum retry attempts for failed downloads
DOWNLOAD_MAX_RETRIES=3

# Rate limit for downloads (e.g., "50K" for 50 KiB/s, empty for unlimited)
DOWNLOAD_RATE_LIMIT=

# Proxy URL for downloads (optional)
# DOWNLOAD_PROXY=http://proxy:8080

# Note: Cookies for authenticated downloads can be provided per-job through the UI

# =============================================================================
# DUBBING WORKER CONFIGURATION
# =============================================================================
# Default target language for dubbing (ISO 639-1 code)
TARGET_LANG=ru

# Number of concurrent dubbing jobs (2-4 recommended)
DUBBING_CONCURRENCY=2

# Maximum retry attempts for failed dubbing
DUBBING_MAX_RETRIES=3

# =============================================================================
# MUXING WORKER CONFIGURATION
# =============================================================================
# Default output container format (mkv, mp4, webm)
DEFAULT_CONTAINER=mkv

# Audio ducking level for original track during voice-over (0.0-1.0)
DUCKING_LEVEL=0.3

# Target LUFS for audio normalization
NORMALIZATION_LUFS=-18.0

# Number of concurrent muxing jobs (1-2 recommended, CPU-bound)
MUXING_CONCURRENCY=1

# Maximum retry attempts for failed muxing
MUXING_MAX_RETRIES=3

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
# Minimum free disk space in GB before blocking new downloads
MIN_FREE_SPACE_GB=10

# Alert threshold for low disk space in GB
ALERT_FREE_SPACE_GB=20

# =============================================================================
# OPTIONAL FEATURES
# =============================================================================
# Enable Prometheus metrics endpoint
ENABLE_METRICS=true

# Enable BullBoard queue monitoring UI (accessible at /admin/queues)
ENABLE_BULLBOARD=false

# =============================================================================
# WEB UI CONFIGURATION
# =============================================================================
# Port for the web UI (nginx)
WEB_UI_PORT=8080
